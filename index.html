<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ricordi Eterni</title>
<style>
body {
  font-family: "Times New Roman", Times, serif;
  background: #0B3C91;
  text-align: center;
  padding: 20px;
  margin: 0;
}
.box {
  background: #FFF;
  padding: 25px;
  border-radius: 14px;
  max-width: 480px;
  margin: 40px auto;
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}
h1 { color:#0B3C91; margin-bottom:10px; }
button {
  margin-top: 15px;
  padding: 14px;
  width: 100%;
  background: #0B3C91;
  border: none;
  color: #FFF;
  font-size: 16px;
  border-radius: 10px;
  cursor: pointer;
}
button:hover { opacity: 0.9; }
#mensaje { margin-top:15px; color:#0B3C91; }
input[type="file"] { display:none; }
</style>
</head>
<body>

<div class="box">
  <h1>‚ú®RECUERDOS‚ú®</h1>
  <p>üíç X & D üíç</p>

  <input type="file" id="cameraInput" accept="image/*" capture="environment" multiple>
  <input type="file" id="galleryInput" accept="image/*" multiple>

  <button onclick="abrirCamara()">üì∏ Captura el momento</button>
  <button onclick="abrirGaleria()">üñºÔ∏è Subir tu recuerdo</button>
  <button onclick="subirFotos()">üíæ Guardar tu recuerdo</button>
  <button onclick="verAlbum()">üìÇ Ver √°lbum</button>

  <p id="mensaje"></p>
</div>

<script>
const API_KEY = "0a5f721449bb9499e0f2049648e66abf"; // üîß reemplaza con tu API Key
let fotosSeleccionadas = [];

function abrirCamara(){ document.getElementById("cameraInput").click(); }
function abrirGaleria(){ document.getElementById("galleryInput").click(); }

document.getElementById("cameraInput").addEventListener("change", e=> fotosSeleccionadas = Array.from(e.target.files));
document.getElementById("galleryInput").addEventListener("change", e=> fotosSeleccionadas = Array.from(e.target.files));

function toBase64(file){
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = ()=>resolve(reader.result);
    reader.onerror = err=>reject(err);
  });
}

async function subirFotos(){
  if(fotosSeleccionadas.length===0){
    document.getElementById("mensaje").innerText="No seleccionaste fotos";
    return;
  }
  document.getElementById("mensaje").innerText="Subiendo fotos...";
  for(let foto of fotosSeleccionadas){
    const formData = new FormData();
    const base64 = await toBase64(foto);
    formData.append("image", base64.split(",")[1]);
    formData.append("key", API_KEY);

    try{
      await fetch("https://api.imgbb.com/1/upload", { method:"POST", body:formData });
    }catch(err){ console.error("Error:", err); }
  }
  document.getElementById("mensaje").innerText="‚ú® Tus recuerdos fueron guardados ‚ú®";
  fotosSeleccionadas = [];
}

// Abrir √°lbum en nueva p√°gina
function verAlbum(){
  window.open("album.html", "_blank");
}

// Botones
window.subirFotos = subirFotos;
window.abrirCamara = abrirCamara;
window.abrirGaleria = abrirGaleria;
window.verAlbum = verAlbum;
</script>
</body>
</html>
